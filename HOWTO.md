# Пользователь
- На странице Отзывы, можно оставить сообщение о работе сайта, и поставить оценку. 
Администратор может редактировать оставленные сообщения и установить статус ```Отображаемый```, 
чтобы показывать эти сообщения на странице Отзывы.

Пользователь может отмечать товары избранными. 
Для каждого товара в качестве рейтинга отображается кол-во пользователей, отметевших этот товар.
Избранные товары доступны во вкладке "Избранное" в личном кабинете пользователя.
### Регистрация
Зарегистрироваться можно двумя способами:
- Стандартный способ: заполните форму с эл. ящиком и паролем. На эл. почту будет отправлена ссылка для активации. 
- Авторизация через соц сети: нажав одну из 4 кнопок соц сетей, вы можете авторизоваться на нашем сайте, не вводя пароль.
К вашему аккаунту будет привязана эл. почта, которую была сохранена в выбранной соц сети. Если с данной почтой уже был создан аккаунт, вы войдёте под ним.

Вы можете добавить номер телефона в настройках профиля, для того чтобы получать смс извещения (мы хотели использовать смску с кодом активации для того чтобы убедиться в подлинности телефона, будем так делать?).
            
На случай утери пароля, можно воспользоваться отправкой ссылки для сброса пароля на привязанный email.
### Личный кабинет
- История покупок - в таблице отображены все заказы клиента: 
    * сумма заказа - цена всех заказанных товаров
    * сумма к оплате - цена всех товаров, которые подтвердил поставщик (только для заказов прошедших подтверждение поставщика)
    * статус одно из:
            
            'Проверяется наличие',
            'Проверяется наличие (Отправлен поставщику)',
            'Подтверждён',
            'Частично подтверждён',
            'Полностью не подтверждён',
            'Оплачен',
            'Оплачен (Отправлен поставщику)',
            'Готов к выдаче',
            'Выполнен',
            'Оплата просрочена',
            'Отменён',
            'Не забран с пункта выдачи',
            
    * Номер заказа состоит из двух частей: ид пользователя, порядковый номер данного заказа. Это поле также является ссылкой, нажав на которую вы перейдете на страницу этого заказа.
- Сообщения - пользователю приходят сообщения в личный кабинет, при успешном оформлении заказа, при изменении их статусов и тд.
- Избранное - товары отмеченные звёздочкой в каталоге.
- В настройках профиля можно изменить пароль или номер телефона.

### Покупки
- Пользователь может добавлять товары в корзину, даже если он не авторизирован. При нажатии на кнопку оформления заказа его попросят авторизироваться, после чего заказ будет оформлен.
- Страницу заказа можно открыть, нажав на ссылку в истории покупок личного кабинета. На странице отображается подробная информация о заказе, в тч. состав.
- В 23:50 все заказы сделанные в этот день меняют статус с ```Проверяется наличие``` на ```Проверяется наличие (Отправлен поставщику)```
- По мере поступления ответов поставщиков, в заказе отмечается кол-во подтверждённых товаров. 
Когда последний необходимый ответ будет загружен: 
    * придёт извещение в личный кабинет и эл. ящик с ссылкой на страницу заказа
    * статус изменится на одно из: 
```Подтверждён```, 
```Частично подтверждён```,
```Полностью не подтверждён```,
    * появится сумма к оплате, 
    * появится возможность оплатить заказа, кроме заказов со статусом ```Полностью не подтверждён```
- Заказы могут быть отменены, если находятся в одном из состояний 
         
        'Проверяется наличие',
        'Проверяется наличие (Отправлен поставщику)',
        'Подтверждён',
        'Частично подтверждён',
- После оплаты статус изменится на ```Оплачен```.
- В 23:50 все оплаченные заказы получат статус ```Оплачен (Отправлен поставщику)```, неоплаченные - ```Оплата просрочена```
- Когда менеджер подготовит заказ и изменит его статус на ```Готов к выдаче``` в личный кабинет, 
на эл. ящик и телефон (если он указан) придут извещения, со сгенерированным секретным ключом.

# Менеджер
- Пользователь с правами менеджера (назначаются из Зазеркалья) могут могут просматривать Панель менеджера. 
В ней отображается форма ввода секретного ключа и таблица со всеми заказами 
(возможно стоит отображать только заказы с определёнными статусами, подумайте какими).
- Менеджер может перейти на страницу заказа.
- Секретный пароль и кнопки оплатить/отменить заказ для него не отображаются. 
- Заказы со статусом ```Оплачен (Отправлен поставщику)``` могут быть изменены на ```Готов к выдаче```.
- На главной странице можно ввести секретный ключ, если он совпадёт с ключом какого-нибудь заказа, 
то этот заказ изменит статус на ```Выполнен```, и менеджер перейдёт на страницу этого заказа.

# Администратор
Пользователи с правами администратора имеют доступ в Зазеркалье (Панель администратора). 
Она состоит из 6 вкладок:
### Загрузки
Первый загрузчик файлов "Обновить базу данных из архива" позволяет отправить zip-архив с xml файлами для обновления БД товаров.
Архив должен иметь следующую структуру (ВСЕ папки обязательны)


    webdata\
        000000001\
            XML файл начинающийся с import___
            goods\
                Произвольное кол-во папок\
                    XML файл начинающийся с import___
                    XML файл начинающийся с prices___
            properties\
                1\
                    XML файл начинающийся с import___

После загрузки файла на страницу будут выведены все сообщения об ошибках. Например:
- ```Не указана цена товара с ГУИД d9575c94-17c6-11e7-bea4-742f68ca67ee```. 
Товару будет установлен статус "Ошибка" и он не будет отображаться на сайте.
- ```Неизвестная категория товаров с ГУИД d9575c94-17c6-11e7-bea4-742f68ca67ee```. 
Товар не будет добавлен в базу.
- ```Неизвестное свойство товара с ГУИД d9575c94-17c6-11e7-bea4-742f68ca67ee```. 
Свойство не будет добавлено к товару.

Кроме ошибок также будет показано сколько было произведено успешных операций добавления/изменения товаров/категорий.
        
Кнопка "Скачать - Выгрузить зявки поставщикам" позволяет скачать zip архив, 
в котором имеется по одной папке для каждого поставщика, к котором были оформлены заявки в этот день. 
В каждой папке находятся файлы order.xlsx (если были оплаты заказов к этому поставщику) - для заказов поставщику и 
preorder.xlsx (если были предзаказы) - для предзаказов.

Загрузчик файлов "Загрузить ответы поставщиков." позволяет загрузить на сайт ответы поставщиков.
Формат ответа поставщика в точности соответствует формату файлов с заказами/предзаказами.
Например, отправленный в качестве ответа файл preorder.xlsx будет обозначать наличие у постащика всех позиций, запрошенных в предзаказе.
Оформлять ответ нужно как можно более точно, не следует надеяться что программа сайта будет догадываться о том где и как вы расположили данные в таблице. 
Идеальным вариантом является редактирование файла preorder.xlsx: изменение столбца "количество" для товаров (в том числе на 0, если товара нет совсем), которых не хватило.
После обработки файла вы получите краткий отчёт: 
- количество заказов, изменивших статус
- количество обработанных товаров
- 1C ИД лишних товаров

### Пользователи
Таблица всех пользователей зарегистрированных на сайте. 
- Статус - пользователи, которые еще не подтвердили свой email имею статус ```не активирован``` и не могут совершать покупки.
- Роль - имеется 3 роли:
    * admin
    * manager
    * user

Администратор также обладает правами менеджера и пользователя, а менеджер правами пользователя.
Для редактирования записи следует кликнуть по иконке с карандашом в последней колонке табл.
### Категории товаров
Изначально вы видите список всех корневых категорий. 
Кликнув по каждой категории вы можете увидеть список всех вложенных в неё категорий.
Вы можете удалять подразделы. Удаление подраздела также удалит все вложенные в него.
Чтобы добавить новый подраздел просто введите новое имя и кликните кнопку добавить.
Если вы кликните по категории, у которой нет вложенных категорий, вы увидите список всех товаров из этой категории.
### Товары
Полный список всех товаров. Не слишком полезно, но всё же.
### Заказы
Список заказов. 
Кнопка "Добавить случайный заказ" добавляет заказ со случайным списком товаров (отображается только в режиме отладки).

Нажав на кнопку редактирования заказа, вы можете просмотреть и отредактировать перечень товаров в этом заказе.
### Отзывы
Статус отзыва принимает одно из трёх значений 
 * ```скрытый``` и ```непроверенный```- не отображаются во вкладке Отзывы.
    Используйте статус ```скрытый```, чтобы пометить проверенные отзывы, которые вы не хотите показывать посетителям.
 * ```отображаемый``` - отображается.
 
 
    
