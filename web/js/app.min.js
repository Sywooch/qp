!function(t){"use strict";var e=t(".bookmark"),n=t(".btn-bookmark"),i=!0,s=t('meta[name="csrf-token"]').attr("content"),a={init:function(){this.event()},event:function(){var s=this;e.on("click",function(){var e=function(t){return t.hasClass("active")?(t.attr("title","В избранное"),i=!1,"/catalog/delete-bookmark"):(i=!0,t.attr("title","В избранном"),"/catalog/add-bookmark")}(t(this)),n=t(this).data("productId");s.getData(e,{id:n})}),n.on("click",function(){var e=t(this).data("productId");i=!1;var n=this;s.getData("/catalog/delete-bookmark",{id:e,remover:t(n).parent().parent()})})},getData:function(e,n){t.ajax({url:e,dataType:"html",type:"POST",data:{product_id:n.id,_csrf:s},success:function(e){status?App.message("Товар добавлен в избранное",!0):App.message("Товар удалён из избранного",!0),n.remover&&n.remover.fadeOut(400,function(){t(this).remove()})},error:function(){App.message("Произошла ошибка",!1),status=!1}})}};a.init()}(jQuery);var Cart=function(t){var e=t(".shopping"),n=t('meta[name="csrf-token"]').attr("content"),i=0,s=0,a=[],o=function(){var e=t("#total span"),n=t(".cart-item__sum span");return{get:function(){return e.text()},update:function(){var i=0;n.each(function(e,n){i+=parseFloat(t(n).text())}),e.text(i)}}};return{init:function(){this.event()},event:function(){},update:function(e,n){var i=e.data("productId"),s=t('.cart-item[data-product-id="'+i+'"]'),a=s.find(".cart-item__quantity"),r=s.find(".cart-item__sum span"),l=parseFloat(s.data("productPrice"));a.text(n),r.text(parseInt(n)*l),o().update(),this.addProduct(i,n),this.addToCart()},addToCart:function(){var t=this;i++,setTimeout(function(){s++,s==i&&(t.saveData("/cart/add-multiple",a),a=[])},1e3)},saveData:function(e,i){var s=this;t.ajax({url:e,dataType:"html",type:"POST",data:{products:i,_csrf:n},success:function(t){s.render(t)},error:function(){console.log("Error"),App.message("Произошла ошибка",!1)}})},addProduct:function(t,e){var n;for(n=0;n<a.length;n++)if(a[n].id==t)return a[n].count=e,!0;return a.push({id:t,count:e}),!1},render:function(t){e.html(t),App.message("Корзина обновленна",!0)}}}(jQuery);!function(t){var e=t(".transform"),n={init:function(){this.event()},event:function(){var t=this;e.on("click",function(){t.shown()})},shown:function(){e.hasClass("shown")?e.removeClass("shown"):e.addClass("shown")}};n.init()}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function e(e){var n=!1;return t('[data-notify="container"]').each(function(i,s){var a=t(s),o=a.find('[data-notify="title"]').html().trim(),r=a.find('[data-notify="message"]').html().trim(),l=o===t("<div>"+e.settings.content.title+"</div>").html().trim(),c=r===t("<div>"+e.settings.content.message+"</div>").html().trim(),d=a.hasClass("alert-"+e.settings.type);return l&&c&&d&&(n=!0),!n}),n}function n(n,s,a){var o={content:{message:"object"==typeof s?s.message:s,title:s.title?s.title:"",icon:s.icon?s.icon:"",url:s.url?s.url:"#",target:s.target?s.target:"-"}};a=t.extend(!0,{},o,a),this.settings=t.extend(!0,{},i,a),this._defaults=i,"-"===this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),(this.settings.allow_duplicates||!this.settings.allow_duplicates&&!e(this))&&this.init()}var i={element:"body",position:null,type:"info",allow_dismiss:!0,allow_duplicates:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,onClick:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){var t=arguments,e=arguments[0];return e.replace(/(\{\{\d\}\}|\{\d\})/g,function(e){if("{{"===e.substring(0,2))return e;var n=parseInt(e.match(/\d/)[0]);return t[n+1]})},t.extend(n.prototype,{init:function(){var t=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(e,n){var i={};"string"==typeof e?i[e]=n:i=e;for(var s in i)switch(s){case"type":this.$ele.removeClass("alert-"+t.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+t.settings.type),t.settings.type=i[s],this.$ele.addClass("alert-"+i[s]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+i[s]);break;case"icon":var a=this.$ele.find('[data-notify="icon"]');"class"===t.settings.icon_type.toLowerCase()?a.removeClass(t.settings.content.icon).addClass(i[s]):(a.is("img")||a.find("img"),a.attr("src",i[s])),t.settings.content.icon=i[e];break;case"progress":var o=t.settings.delay-t.settings.delay*(i[s]/100);this.$ele.data("notify-delay",o),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i[s]).css("width",i[s]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",i[s]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",i[s]);break;default:this.$ele.find('[data-notify="'+s+'"]').html(i[s])}var r=this.$ele.outerHeight()+parseInt(t.settings.spacing)+parseInt(t.settings.offset.y);t.reposition(r)},close:function(){t.close()}}},buildNotify:function(){var e=this.settings.content;this.$ele=t(String.format(this.settings.template,this.settings.type,e.title,e.message,e.url,e.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var e=this,n=this.settings.offset.y,i={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},s=!1,a=this.settings;switch(t('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){n=Math.max(n,parseInt(t(this).css(a.placement.from))+parseInt(t(this).outerHeight())+parseInt(a.spacing))}),this.settings.newest_on_top===!0&&(n=this.settings.offset.y),i[this.settings.placement.from]=n+"px",this.settings.placement.align){case"left":case"right":i[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":i.left=0,i.right=0}this.$ele.css(i).addClass(this.settings.animate.enter),t.each(Array("webkit-","moz-","o-","ms-",""),function(t,n){e.$ele[0].style[n+"AnimationIterationCount"]=1}),t(this.settings.element).append(this.$ele),this.settings.newest_on_top===!0&&(n=parseInt(n)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(n)),t.isFunction(e.settings.onShow)&&e.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(){s=!0}).one(this.animations.end,function(){e.$ele.removeClass(e.settings.animate.enter),t.isFunction(e.settings.onShown)&&e.settings.onShown.call(this)}),setTimeout(function(){s||t.isFunction(e.settings.onShown)&&e.settings.onShown.call(this)},600)},bind:function(){var e=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){e.close()}),t.isFunction(e.settings.onClick)&&this.$ele.on("click",function(t){t.target!=e.$ele.find('[data-notify="dismiss"]')[0]&&e.settings.onClick.call(this,t)}),this.$ele.mouseover(function(){t(this).data("data-hover","true")}).mouseout(function(){t(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){e.$ele.data("notify-delay",e.settings.delay);var n=setInterval(function(){var t=parseInt(e.$ele.data("notify-delay"))-e.settings.timer;if("false"===e.$ele.data("data-hover")&&"pause"===e.settings.mouse_over||"pause"!=e.settings.mouse_over){var i=(e.settings.delay-t)/e.settings.delay*100;e.$ele.data("notify-delay",t),e.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i).css("width",i+"%")}t<=-e.settings.timer&&(clearInterval(n),e.close())},e.settings.timer)}},close:function(){var e=this,n=parseInt(this.$ele.css(this.settings.placement.from)),i=!1;this.$ele.attr("data-closing","true").addClass(this.settings.animate.exit),e.reposition(n),t.isFunction(e.settings.onClose)&&e.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(){i=!0}).one(this.animations.end,function(){t(this).remove(),t.isFunction(e.settings.onClosed)&&e.settings.onClosed.call(this)}),setTimeout(function(){i||(e.$ele.remove(),e.settings.onClosed&&e.settings.onClosed(e.$ele))},600)},reposition:function(e){var n=this,i='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',s=this.$ele.nextAll(i);this.settings.newest_on_top===!0&&(s=this.$ele.prevAll(i)),s.each(function(){t(this).css(n.settings.placement.from,e),e=parseInt(e)+parseInt(n.settings.spacing)+t(this).outerHeight()})}}),t.notify=function(t,e){var i=new n(this,t,e);return i.notify},t.notifyDefaults=function(e){return i=t.extend(!0,{},i,e)},t.notifyClose=function(e){"undefined"==typeof e||"all"===e?t("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):"success"===e||"info"===e||"warning"===e||"danger"===e?t(".alert-"+e+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):e?t(e+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):t('[data-notify-position="'+e+'"]').find('[data-notify="dismiss"]').trigger("click")},t.notifyCloseExcept=function(e){"success"===e||"info"===e||"warning"===e||"danger"===e?t("[data-notify]").not(".alert-"+e).find('[data-notify="dismiss"]').trigger("click"):t("[data-notify]").not(e).find('[data-notify="dismiss"]').trigger("click")}}),function(t){t.fn.stepper=function(e){var n={type:"float",floatPrecission:2,ui:!0,allowWheel:!0,allowArrows:!0,arrowStep:1,wheelStep:1,limit:[null,null],preventWheelAcceleration:!0,incrementButton:"&blacktriangle;",decrementButton:"&blacktriangledown;",onStep:null,onWheel:null,onArrow:null,onButton:null,onKeyUp:null};return t(this).each(function(){function i(t){t.preventDefault();var e,n=t.originalEvent;if(n.wheelDelta?e=n.wheelDelta/120:n.detail&&(e=-n.detail/3),e){c.preventWheelAcceleration&&(e=e<0?-1:1);var i=s(c.wheelStep*e);a("Wheel",[i,e>0])}}function s(t){d.val()||d.val(0);var e="int"==c.type?parseInt:parseFloat,n=o(e(d.val())+t);return d.val(n),a("Step",[n,t>0]),n}function a(t,e){var n=c["on"+t];"function"==typeof n&&n.apply(d,e)}function o(t){var e=c.limit[0],n=c.limit[1];return null!==e&&t<e?t=e:null!==n&&t>n&&(t=n),r(t)}function r(t,e){"undefined"==typeof e&&(e=c.floatPrecission);var n=Math.pow(10,e);return t=Math.round(t*n)/n}var l=t(this).data();delete l.stepper;var c=t.extend({},n,e,l),d=t(this),u=t('<div class="product-counter"/>');if(!d.data("stepper")){if(u.insertAfter(d),d.appendTo(u),d.stepper=function(){return{limit:o,decimalRound:r,onStep:function(t){c.onStep=t},onWheel:function(t){c.onWheel=t},onArrow:function(t){c.onArrow=t},onButton:function(t){c.onButton=t},onKeyUp:function(t){c.onKeyUp=t}}}(),d.data("stepper",d.stepper),c.ui){var f,p=t('<a class="btn btn-down">'+c.decrementButton+"</a>").appendTo(u),h=t('<a class="btn btn-up">'+c.incrementButton+"</a>").appendTo(u);h.mousedown(function(t){t.preventDefault();var e=s(c.arrowStep);a("Button",[e,!0])}),p.mousedown(function(t){t.preventDefault();var e=s(-c.arrowStep);a("Button",[e,!1])}),t(document).mouseup(function(){clearInterval(f)})}c.allowWheel&&(u.bind("DOMMouseScroll",i),u.bind("mousewheel",i)),u.keydown(function(e){var n=e.which,i=d.val();if(c.allowArrows)switch(n){case 38:i=s(c.arrowStep),a("Arrow",[i,!0]);break;case 40:i=s(-c.arrowStep),a("Arrow",[i,!1])}(n<37&&n>40||n>57&&n<91||n>105&&110!=n&&190!=n)&&e.preventDefault(),"float"==c.type&&t.inArray(n,[110,190])!=-1&&i.indexOf(".")!=-1&&e.preventDefault()}).keyup(function(t){a("KeyUp",[d.val()])})}})}}(jQuery);var Product=function(t){const e=(t(".product-count"),t(".btn-compare")),n=t(".shopping");var i=t('meta[name="csrf-token"]').attr("content");const s=900;var a=!0;return{init:function(){this.event()},event:function(){var n=this;e.on("click",function(){a&&(n.addToCart(t(this)),a=!1,setTimeout(function(){a=!0},s))})},addToCart:function(t){var e=t.data("productId")||0,n=t.attr("data-product-count")||0;this.getData("/cart/add",{id:e,count:n})},fly:function(e){var i=t("img[data-product-id="+e+"]");if(i){var s=i.clone().offset(i.offset()).css({opacity:"0.7",position:"absolute",height:"150px",width:"150px","z-index":"1000"}).appendTo(t("body")).animate({top:n.offset().top+10,left:n.offset().left+50,width:35,height:35},"slow");s.animate({width:0,height:0},function(){t(this).detach()})}},getData:function(e,n){var s=this;t.ajax({url:e,dataType:"html",type:"POST",data:{product_id:n.id,product_count:n.count,_csrf:i},success:function(t){s.render(t),App.message("Товар успешно добавлен в корзину",!0)},error:function(){console.log("Error"),App.message("Произошла ошибка",!1)}})},render:function(t){n.html(t)},update:function(n,i){var s=n.data("productId");e.each(function(e,n){t(n).data("productId")===s&&t(n).attr("data-product-count",i)})}}}(jQuery);!function(t){"use strict";var e=t(".btn-search-modal"),n=t("#search-input-mobile"),i={init:function(){this.event()},event:function(){var t=this;e.on("click",function(){setTimeout(t.openSearch,800)})},openSearch:function(){n.focus()}};i.init()}(jQuery);var App=function(){"use strict";return{init:function(){var t=[],e=$("#app[data-stage]").data("stage")||"product";t.cart=Cart,t.product=Product,t[e].init(),console.log(e),$("input[type=number]").stepper({type:"int",wheel_step:1,arrow_step:1,limit:[1,100],incrementButton:'<i class="fa fa-plus"></i>',decrementButton:'<i class="fa fa-minus"></i>',onStep:function(n,i){t[e].update(this,n)}})},message:function(t,e){var n=e?"success":"danger",i=e?'<i class="fa fa-check fa-lg" aria-hidden="true"></i> ':'<i class="fa fa-info-circle fa-lg" aria-hidden="true"></i> ';$.notify({message:i+t},{type:n,delay:2e3,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})}}}();App.init();