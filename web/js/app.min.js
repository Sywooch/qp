!function(t){"use strict";var n=t(".bookmark"),e=t('meta[name="csrf-token"]').attr("content"),o={init:function(){this.event()},event:function(){var e=this;n.on("click",function(){var n=function(t){return t.hasClass("active")?(t.attr("title","В избранное"),"/catalog/delete-bookmark"):(t.attr("title","В избранном"),"/catalog/add-bookmark")}(t(this)),o=t(this).data("productId");e.getData(n,{id:o})})},getData:function(n,o){t.ajax({url:n,dataType:"html",type:"POST",data:{product_id:o.id,_csrf:e},success:function(t){console.log(t)},error:function(){console.log("Error")}})}};o.init()}(jQuery);var Cart=function(t){var n=t(".shopping"),e=t('meta[name="csrf-token"]').attr("content"),o=0,a=0,r=[],i=function(){var n=t("#total span"),e=t(".cart-item__sum span");return{get:function(){return n.text()},update:function(){var o=0;e.each(function(n,e){o+=parseFloat(t(e).text())}),n.text(o)}}};return{init:function(){this.event()},event:function(){},update:function(n,e){var o=n.data("productId"),a=t('.cart-item[data-product-id="'+o+'"]'),r=a.find(".cart-item__quantity"),u=a.find(".cart-item__sum span"),c=parseFloat(a.data("productPrice"));r.text(e),u.text(parseInt(e)*c),i().update(),this.addProduct(o,e),this.addToCart()},addToCart:function(){var t=this;o++,setTimeout(function(){a++,a==o&&(t.saveData("/cart/add-multiple",r),r=[])},1e3)},saveData:function(n,o){var a=this;t.ajax({url:n,dataType:"html",type:"POST",data:{products:o,_csrf:e},success:function(t){a.render(t)},error:function(){console.log("Error")}})},addProduct:function(t,n){var e;for(e=0;e<r.length;e++)if(r[e].id==t)return r[e].count=n,!0;return r.push({id:t,count:n}),!1},render:function(t){n.html(t)}}}(jQuery);!function(t){var n=t(".transform"),e={init:function(){this.event()},event:function(){var t=this;n.on("click",function(){t.shown()})},shown:function(){n.hasClass("shown")?n.removeClass("shown"):n.addClass("shown")}};e.init()}(jQuery),function(t){t.fn.stepper=function(n){var e={type:"float",floatPrecission:2,ui:!0,allowWheel:!0,allowArrows:!0,arrowStep:1,wheelStep:1,limit:[null,null],preventWheelAcceleration:!0,incrementButton:"&blacktriangle;",decrementButton:"&blacktriangledown;",onStep:null,onWheel:null,onArrow:null,onButton:null,onKeyUp:null};return t(this).each(function(){function o(t){t.preventDefault();var n,e=t.originalEvent;if(e.wheelDelta?n=e.wheelDelta/120:e.detail&&(n=-e.detail/3),n){s.preventWheelAcceleration&&(n=n<0?-1:1);var o=a(s.wheelStep*n);r("Wheel",[o,n>0])}}function a(t){l.val()||l.val(0);var n="int"==s.type?parseInt:parseFloat,e=i(n(l.val())+t);return l.val(e),r("Step",[e,t>0]),e}function r(t,n){var e=s["on"+t];"function"==typeof e&&e.apply(l,n)}function i(t){var n=s.limit[0],e=s.limit[1];return null!==n&&t<n?t=n:null!==e&&t>e&&(t=e),u(t)}function u(t,n){"undefined"==typeof n&&(n=s.floatPrecission);var e=Math.pow(10,n);return t=Math.round(t*e)/e}var c=t(this).data();delete c.stepper;var s=t.extend({},e,n,c),l=t(this),d=t('<div class="product-counter"/>');if(!l.data("stepper")){if(d.insertAfter(l),l.appendTo(d),l.stepper=function(){return{limit:i,decimalRound:u,onStep:function(t){s.onStep=t},onWheel:function(t){s.onWheel=t},onArrow:function(t){s.onArrow=t},onButton:function(t){s.onButton=t},onKeyUp:function(t){s.onKeyUp=t}}}(),l.data("stepper",l.stepper),s.ui){var f,p=t('<a class="btn btn-down">'+s.decrementButton+"</a>").appendTo(d),h=t('<a class="btn btn-up">'+s.incrementButton+"</a>").appendTo(d);h.mousedown(function(t){t.preventDefault();var n=a(s.arrowStep);r("Button",[n,!0])}),p.mousedown(function(t){t.preventDefault();var n=a(-s.arrowStep);r("Button",[n,!1])}),t(document).mouseup(function(){clearInterval(f)})}s.allowWheel&&(d.bind("DOMMouseScroll",o),d.bind("mousewheel",o)),d.keydown(function(n){var e=n.which,o=l.val();if(s.allowArrows)switch(e){case 38:o=a(s.arrowStep),r("Arrow",[o,!0]);break;case 40:o=a(-s.arrowStep),r("Arrow",[o,!1])}(e<37&&e>40||e>57&&e<91||e>105&&110!=e&&190!=e)&&n.preventDefault(),"float"==s.type&&t.inArray(e,[110,190])!=-1&&o.indexOf(".")!=-1&&n.preventDefault()}).keyup(function(t){r("KeyUp",[l.val()])})}})}}(jQuery);var Product=function(t){const n=(t(".product-count"),t(".btn-compare")),e=t(".shopping");var o=t('meta[name="csrf-token"]').attr("content");const a=900;var r=!0,i={init:function(){this.event()},event:function(){var e=this;n.on("click",function(){r&&(e.addToCart(t(this)),r=!1,setTimeout(function(){r=!0},a))})},addToCart:function(n){var o=n.data("productId")||0,a=n.attr("data-product-count")||0;this.getData("/cart/add",{id:o,count:a});var r=t("img[data-product-id="+o+"]");if(r){var i=r.clone().offset(r.offset()).css({opacity:"0.7",position:"absolute",height:"150px",width:"150px","z-index":"1000"}).appendTo(t("body")).animate({top:e.offset().top+10,left:e.offset().left+50,width:35,height:35},"slow");i.animate({width:0,height:0},function(){t(this).detach()})}},getData:function(n,e){var a=this;t.ajax({url:n,dataType:"html",type:"POST",data:{product_id:e.id,product_count:e.count,_csrf:o},success:function(t){a.render(t)},error:function(){console.log("Error")}})},render:function(t){setTimeout(function(){e.html(t)},600)},changeCount:function(e,o){var a=e.data("productId");n.each(function(n,e){t(e).data("productId")===a&&t(e).attr("data-product-count",o)})}};return{init:i.init(),changeCount:i.changeCount}}(jQuery);!function(t){"use strict";var n=t(".btn-search-modal"),e=t("#search-input-mobile"),o={init:function(){this.event()},event:function(){var t=this;n.on("click",function(){setTimeout(t.openSearch,800)})},openSearch:function(){e.focus()}};o.init()}(jQuery);var App=function(){"use strict";return{init:function(){Product.init,Cart.init,$("input[type=number]").stepper({type:"int",wheel_step:1,arrow_step:1,limit:[1,100],incrementButton:'<i class="fa fa-plus"></i>',decrementButton:'<i class="fa fa-minus"></i>',onStep:function(t,n){Product.changeCount(this,t),Cart.update(this,t)}})}}}();App.init();